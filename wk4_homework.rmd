---
title: "wk4_homework"
output: html_document
date: "2025-10-28"
---

```{r}
library(sf)
library(dplyr)
library(ggplot2)
library(readr)
library(stringr)
library(classInt)
library(scales)
library(tmap)
library(countrycode)
library(readxl)
```


read data document

```{r}
world <- st_read("/Users/levine/Desktop/CASA/GIS/wk4/exam_doc/World_Data55/World_Countries_Generalized.shp")
```

```{r}
gii <- st_read("/Users/levine/Desktop/CASA/GIS/wk4/exam_doc/gii_90-23.csv")
#gii <- readxl::read_excel(gii_path, sheet = "Table 5. GII", skip = 5)
```
check names
```{r}
names(gii)
names(world)
```



change all to lowercase
```{r}
names(world) <- tolower(names(world)) 
names(gii) <- tolower(names(gii))
```


unified listing
```{r}
 
world <- world %>%
  mutate(name_join = coalesce(country, countryaff))
         
world <- world %>%
  mutate(iso3 = countrycode(iso, "iso2c", "iso3c"))
```


select iso3, 2010 and 2019, 
```{r}
gii_10_19 <- gii %>%
  transmute(
    iso3 = iso3,
    gii_2010 = as.numeric(gii_2010),
    gii_2019 = as.numeric(gii_2019),
    gii_diff_10_19 = gii_2019 - gii_2010
  )
```


calculate the difference
```{r}
gii_diff <- gii_10_19 %>%
  mutate(gii_diff_10_19 = gii_2019 - gii_2010)
```

join the world
```{r}
world_gii <- world %>%
  left_join(gii_diff, by = "iso3")
```



